<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Diamond Rounds Lab 6</title>
        <link rel="stylesheet" href="styles.css"/>
    </head>

    <body>
        <h1><strong>Assignment 2</strong></h1>

        <div class='search-box'>
            <input type='text'/>
            <script>
                const data = 'https://data.princegeorgescountymd.gov/resource/umjn-t2iz.json';

                const vendors_list = [];

                fetch(data)
                    .then(blob => blob.json())
                    .then(resource => vendors_list.push(... resource))
                
                function findMatches(wordToMatch, vendors_list) {
                    return vendors_list.filter(term => {
                        const regex = new RegExp(wordToMatch, 'gi')
                        return term.name.match(regex) || 
                        term.category.match(regex) || 
                        term.city.match(regex)
                    });
                }

                function displayMatches() {
                    const matchArray = findMatches(this.value, vendors_list)
                    const html = matchArray.map(term => {
                        return `
                            <li> 
                                <span class="name">${term.name}</span>
                                <span class="category">${term.category,}</span>
                                <span class="address">${term.address_line_1}</span>
                                <span class="city">${term.city}</span>    
                                <span class="zip">${term.zip}</span>
                            </li>
                        `;
                    }).join('');
                    suggestions.innerHTML = html
                }

                const searchInput = document.querySelector('.search');
                const suggestions = document.querySelector('.suggestions')

                searchInput.addEventListener('change', displayMatches)
                
            </script>
        </div>
    </body>

</html> 